<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:fb="https://www.facebook.com/2008/fbml"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:a4j="http://richfaces.org/a4j">

<h:head>
    <title>Stratego</title>
    <h:outputStylesheet library="css" name="styles.css"  />
    <h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />
    <h:outputScript library="js" name="script.js" />
    <h:outputScript library="js" name="fblogin.js" />
</h:head>

<h:body>

    <rich:dragIndicator id="indicator" />

    <h:form>
        <p:menubar styleClass="centeredMenuBar">
            <p:menuitem value="" url="#" icon="stratego" disabled="true"/>
            <p:menuitem value="Home" url="index.xhtml"/>
            <p:menuitem value="Play" url="game.xhtml" />

            <p:submenu label="Help">
                <p:menuitem value="Instructions" url="instructions.xhtml" />
                <p:menuitem value="FAQ" url="faq.xhtml" />
            </p:submenu>

            <p:menuitem value="Achievements" url="achievements.xhtml" />

            <p:menuitem value="Login" url="#" onclick="showLogin()"/>
        </p:menubar>
    </h:form>
    <div id="fade"></div>
    <div id="loginContainer">
        <div id="loginForm">
            <table>
                <h:form>
                    <tr><td><h:outputLabel for="userName" value="Username: "/></td><td><h:inputText id="userName" value="#{userBean.username}" required="true"/></td></tr>
                    <tr><td><h:outputLabel for="password" value="Password: "/></td><td><h:inputSecret id="password" value="#{userBean.password}" required="true"/></td></tr>
                    <tr><td><h:commandButton styleClass="btn" value="Login" action="#{userBean.checkCredentials()}"/></td><td><fb:login-button show-faces="false" width="200" max-rows="1" autologoutlink="true"/></td></tr>
                </h:form>
                <h:form>
                    <tr><td><h:commandButton styleClass="btn" value="Register" action="register" /></td></tr>
                </h:form>
            </table>
        </div>
    </div>

        <div id="gameboard">

   <!--         <table>
                <tr> <td>   <a4j:outputPanel>
                    <rich:dragSource dragType="true" dragValue="img/piece/b0.png"/>

                    <h:graphicImage library="css" name="img/piece/b0.png" alt="Flag of blue player"/>
                </a4j:outputPanel>
                </td>
                    <td><rich:dropTarget acceptedTypes="True" render="gameboard, src"/></td><td></td><td></td><td></td><td><h:graphicImage library="css" name="img/piece/b0.png" alt="Flag of blue player"/></td><td></td><td></td><td></td><td></td></tr>
                <tr> <td><rich:dropTarget acceptedTypes="True" render="gameboard, src"/></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                <tr> <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                <tr> <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                <tr> <td> </td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                <tr> <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                <tr> <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                <tr> <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                <tr> <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                <tr> <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
            </table> -->



            <table id="src">
                <tr>

                    <ui:repeat var="piece" value="#{dragDropBean.pieces}" varStatus="status">

                        <f:verbatim rendered="#{status.index mod 10 ==0}">
                            &lt;/tr&gt;  &lt;tr&gt;
                        </f:verbatim>


                         <td>
                             <rich:panel styleClass="dropTargetPanel" id="test">

                                 <rich:dropTarget acceptedTypes="True" render="test, src" dropListener="#{dragDropEventBean.processDrop}" dropValue="#{status.index}"/>

                             <h:panelGroup rendered="#{piece !=null}">
                             <a4j:outputPanel layout="block" styleClass="default">
                                 <rich:dragSource type="True" dragValue="#{piece}" />

                                 <h:graphicImage library="css" name="#{piece.url}" alt="#{piece.name}"/>

                             </a4j:outputPanel>
                             </h:panelGroup>

                             </rich:panel>
                         </td>

                    </ui:repeat>
                </tr>
            </table>


            <!--            <p:outputLabel value="#{dragDropBean.source}"> + </p:outputLabel>
                   <p:outputLabel value="#{dragDropBean.target}"> </p:outputLabel>

              <h:dataTable id="src" value="#{dragDropBean.pieces}" var="fm">
                      <h:column>
                          <a4j:outputPanel layout="block" styleClass="default">
                              <rich:dragSource type="True" dragValue="#{fm.name}" />

                              <h:graphicImage library="css" name="img/piece/b0.png" alt="Flag of blue player"/>

                          </a4j:outputPanel>
                      </h:column>

                  </h:dataTable>

                  <a4j:log/>    -->

    </div>
</h:body>
</html>